@inherits TemplateComponentBase
@using BlHell_per.Core.Questions

<MudCard Outlined="true" style="@($"background-color:{this.BackgroundColor}")">
    <MudStack Spacing="2">
        <MudPaper Class="@this.Class" Style="@CssStyle">
            <MudStack Row>
                <MudText @key="QuestionModel.Title" class="ml-4 mb-2" Style="white-space: pre-line;" Typo="Typo.h6">
                    @if (Index != null)
                    {
                        <MudChip T="string" Style="font-size:1.5rem" Variant="Variant.Filled" Color="@this.Color" Size="Size.Large">@this.Index</MudChip>
                    }
                    <MudHighlighter Text="@QuestionModel.Title" HighlightedText="@HighlitedText" />
                </MudText>
            </MudStack>
            @if (QuestionModel.Tags != null)
            {
                @foreach (string tag in QuestionModel.Tags)
                {
                    <MudChip Class="ml-4" T="string" Style="font-size:1rem" Variant="Variant.Filled" Color="@this.Color" Size="Size.Medium">
                        <MudHighlighter Text="@tag" HighlightedText="@HighlitedText" />
                    </MudChip>
                }
            }
        </MudPaper>
        @if(this.ChildContent != null)
        {
            <MudPaper>
                @ChildContent
            </MudPaper>
        }
    </MudStack>
</MudCard>

@code {
    [Parameter]
    [EditorRequired]
    public required Question QuestionModel { get; set; }

    [Parameter]
    public string? HighlitedText { get; set; }

    [Parameter] 
    public int? Index { get; set; }

    protected Color Color { get; set; } = Color.Default;
    protected string? BackgroundColor { get; set; }
    protected string? Class { get; set; }
    protected string? CssStyle { get; set; }
}